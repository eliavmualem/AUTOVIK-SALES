<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×‘×“×™×§×ª ×’'×™×œ×™ ×¢× ×˜×•×¤ ×¡×¨×•×•×™×¡</title>
</head>
<body>
    <h1>×‘×“×™×§×ª ×’'×™×œ×™ ××•×“×™×¢×™×Ÿ - ×›×•×œ×œ ×¢××œ×ª ×˜×•×¤ ×¡×¨×•×•×™×¡</h1>
    <div id="test-container"></div>
    
    <script src="js/showroom-config.js"></script>
    <script src="js/geely-layout-generator.js"></script>
    <script src="js/calc-geely.js"></script>
    
    <script>
        console.log('ğŸ§ª Testing Geely Modiin with Top Service Commission');
        
        const config = window.getShowroomConfig('geely-modiin');
        console.log('Config:', config);
        
        // Create month content
        const monthContent = window.createGeelyMonthLayout('geely-modiin', '2026-01');
        document.getElementById('test-container').innerHTML = monthContent;
        
        console.log('Layout rendered');
        
        // Fill sample data for Manager Uri
        const prefix = 'gm-2026-01';
        const uriId = 'uri';
        
        // Set Manager data
        document.getElementById(`${prefix}-target-deliveries`).value = 25;
        document.getElementById(`${prefix}-actual-deliveries`).value = 22;
        document.getElementById(`${prefix}-satisfaction-score`).value = 85;
        document.getElementById(`${prefix}-nps-score`).value = 80;
        document.getElementById(`${prefix}-total-accessories`).value = 60000;
        document.getElementById(`${prefix}-test-drive-percent`).value = 25;
        document.getElementById(`${prefix}-tradein-count`).value = 6;
        document.getElementById(`${prefix}-service-packages`).value = 12;  // ×—×‘×™×œ×•×ª ×©×™×¨×•×ª
        document.getElementById(`${prefix}-finance-percent`).value = 28;
        document.getElementById(`${prefix}-insurance-sales`).value = 10;
        document.getElementById(`${prefix}-mobility-count`).value = 3;
        
        // Potentials
        document.getElementById(`${prefix}-potential-accessories`).value = 22;
        document.getElementById(`${prefix}-potential-service`).value = 14;  // ×¤×•×˜× ×¦×™××œ ×—×‘×™×œ×•×ª
        document.getElementById(`${prefix}-potential-insurance`).value = 22;
        
        console.log('Sample data filled for Uri');
        console.log('×—×‘×™×œ×•×ª: 12, ×¤×•×˜× ×¦×™××œ: 14 â†’ ××—×•×–: ~85.7%');
        console.log('×¦×¤×•×™: ×¢××œ×ª ×˜×•×¤ ×¡×¨×•×•×™×¡ â‚ª1,250');
        
        // Calculate
        setTimeout(() => {
            window.calculateGeelyMonth('geely-modiin', '2026-01');
            
            // Check results
            setTimeout(() => {
                const topServiceElement = document.getElementById(`${prefix}-${uriId}-top-service-commission`);
                const totalElement = document.getElementById(`${prefix}-${uriId}-total`);
                
                if (topServiceElement && totalElement) {
                    console.log('\nâœ… ×ª×•×¦××•×ª:');
                    console.log('×¢××œ×ª ×˜×•×¤ ×¡×¨×•×•×™×¡:', topServiceElement.textContent);
                    console.log('×¡×”"×› ×¢××œ×•×ª:', totalElement.textContent);
                    
                    // Verify
                    const topServiceText = topServiceElement.textContent;
                    if (topServiceText.includes('1,250') || topServiceText.includes('1250')) {
                        console.log('âœ… ×¢××œ×ª ×˜×•×¤ ×¡×¨×•×•×™×¡ ×—×•×©×‘×” × ×›×•×Ÿ!');
                    } else {
                        console.error('âŒ ×¢××œ×ª ×˜×•×¤ ×¡×¨×•×•×™×¡ ×œ× × ×›×•× ×”');
                    }
                } else {
                    console.error('âŒ ×œ× × ××¦××• ××œ×× ×˜×™ ×”×ª×•×¦××•×ª');
                }
            }, 500);
        }, 500);
    </script>
</body>
</html>
