<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×‘×“×™×§×ª × ×¦×™×’ ×’'×™×œ×™</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/new-layout.css">
    <link rel="stylesheet" href="css/geely-style.css">
    <style>
        body {
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        h1 {
            color: #11998e;
            margin-bottom: 10px;
        }
        .test-info {
            background: #e8f5f4;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-right: 4px solid #11998e;
        }
        .grid-2col {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ§ª ×‘×“×™×§×ª × ×¦×™×’ ×’'×™×œ×™ - ×“× ×™××œ ×¢×˜×™×”</h1>
        <div class="test-info">
            <strong>××˜×¨×ª ×”×‘×“×™×§×”:</strong> ×‘×“×™×§×ª ×›×¨×˜×™×¡ ×”×–× ×” ×§×•××¤×§×˜×™ ×œ× ×¦×™×’ ×¢× ×˜×‘×œ××•×ª ×¤×•×˜× ×¦×™××œ×™×™× ×•×—×™×©×•×‘ ×¢××œ×•×ª
        </div>

        <div id="test-content"></div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/showroom-config.js"></script>
    <script src="js/geely-layout-generator.js"></script>
    <script src="js/calc-geely.js"></script>

    <script>
        console.log('ğŸ§ª Starting Geely Salesperson Test...');

        // Get config
        const config = window.getShowroomConfig('geely-modiin');
        console.log('ğŸ“‹ Config loaded:', config);

        const prefix = 'geely-test-2026-01';
        const salesperson = config.employees.salespeople[0]; // ×“× ×™××œ ×¢×˜×™×”

        console.log('ğŸ‘¤ Testing salesperson:', salesperson);

        // Create input card
        const inputCard = window.createGeelySalespersonInputCard(prefix, salesperson);
        
        // Create result card
        const resultCard = window.createGeelySalespersonResultCard(prefix, salesperson);

        // Display side by side
        document.getElementById('test-content').innerHTML = `
            <div class="grid-2col">
                ${inputCard}
                ${resultCard}
            </div>
        `;

        console.log('âœ… Cards created successfully');

        // Test calculation with sample data
        setTimeout(() => {
            console.log('ğŸ§® Testing calculation...');
            
            // Fill sample data
            const testData = {
                deliveries: 15,
                nps: 82,
                accessories: 25000,
                warranty: 8,
                insurance: 10,
                tradein: 5,
                deliveryMeetings: 14,
                servicePackages: 9,
                potentialAccessories: 18,
                potentialInsurance: 18,
                potentialService: 18
            };

            // Set values - matching the IDs in createGeelySalespersonInputCard
            document.getElementById(`${prefix}-${salesperson.id}-deliveries`).value = testData.deliveries;
            document.getElementById(`${prefix}-${salesperson.id}-nps`).value = testData.nps;
            document.getElementById(`${prefix}-${salesperson.id}-accessories-total`).value = testData.accessories;
            document.getElementById(`${prefix}-${salesperson.id}-warranty`).value = testData.warranty;
            document.getElementById(`${prefix}-${salesperson.id}-insurance`).value = testData.insurance;
            document.getElementById(`${prefix}-${salesperson.id}-tradein`).value = testData.tradein;
            document.getElementById(`${prefix}-${salesperson.id}-delivery-meeting`).value = testData.deliveryMeetings;
            document.getElementById(`${prefix}-${salesperson.id}-service`).value = testData.servicePackages;
            
            document.getElementById(`${prefix}-${salesperson.id}-potential-accessories`).value = testData.potentialAccessories;
            document.getElementById(`${prefix}-${salesperson.id}-potential-insurance`).value = testData.potentialInsurance;
            document.getElementById(`${prefix}-${salesperson.id}-potential-service`).value = testData.potentialService;

            console.log('ğŸ“ Test data filled:', testData);

            // Run calculation
            const results = window.calculateGeelySalespersonCommissions(
                prefix,
                salesperson.id,
                testData.deliveries,
                testData.nps,
                testData.accessories,
                testData.warranty,
                testData.insurance,
                testData.tradein,
                testData.deliveryMeetings,
                testData.servicePackages,
                testData.potentialAccessories,
                testData.potentialInsurance,
                testData.potentialService,
                0, 0, 0 // special fields
            );

            console.log('ğŸ’° Calculation results:', results);
            console.log('âœ… Test completed!');
        }, 500);
    </script>
</body>
</html>
