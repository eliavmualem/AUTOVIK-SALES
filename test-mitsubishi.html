<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§ª ×‘×“×™×§×”: ××™×¦×•×‘×™×©×™ ××•×“×™×¢×™×Ÿ</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/new-layout.css">
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; }
        .test-container { max-width: 1400px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; }
        .test-header { text-align: center; margin-bottom: 30px; color: #764ba2; }
        .test-info { background: #e3f2fd; padding: 15px; border-radius: 10px; margin: 20px 0; border-left: 5px solid #2196f3; }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>ğŸ§ª ×‘×“×™×§×”: ××™×¦×•×‘×™×©×™ ××•×“×™×¢×™×Ÿ - ×©×—×£ ×›×”×Ÿ</h1>
            <p>×‘×“×™×§×ª ××•×“×œ ×¢××œ×•×ª ××™×•×—×“: 200Ã—totalCars + ×‘×™×˜×•×— + ××—×¨×™×•×ª + ×˜×•×¤ ×¡×¨×•×•×™×¡ ××“×•×¨×’</p>
        </div>

        <div class="test-info">
            <h3>ğŸ“‹ ×ª×¨×—×™×© ×”×‘×“×™×§×”:</h3>
            <ul>
                <li><strong>×™×¢×“ ×¡× ×™×£</strong>: 10 ××¡×™×¨×•×ª</li>
                <li><strong>××¡×™×¨×•×ª ×‘×¤×•×¢×œ</strong>: 12 (×©×—×£ ×‘×œ×‘×“)</li>
                <li><strong>×‘×™×˜×•×—</strong>: 8 ×™×—×™×“×•×ª (8 Ã— 75 = â‚ª600)</li>
                <li><strong>×”×¨×—×‘×•×ª ××—×¨×™×•×ª</strong>: 6 ×™×—×™×“×•×ª (6 Ã— 60 = â‚ª360)</li>
                <li><strong>×˜×•×¤ ×¡×¨×•×•×™×¡</strong>: 7 ××ª×•×š 10 ×¤×•×˜× ×¦×™××œ×™×™× = 70% (××¢×œ 65% â†’ â‚ª1,500)</li>
                <li><strong>×¨×›×‘×™ ×”×“×’××”</strong>: â‚ª150</li>
                <li><strong>×”×¤×¨×©×™ ×¢××œ×•×ª</strong>: â‚ª80</li>
            </ul>
            <h4>×¦×¤×™:</h4>
            <ul>
                <li>××¡×™×¨×•×ª: 12 Ã— 200 = â‚ª2,400</li>
                <li>×‘×™×˜×•×—: 8 Ã— 75 = â‚ª600</li>
                <li>××—×¨×™×•×ª: 6 Ã— 60 = â‚ª360</li>
                <li>×˜×•×¤ ×¡×¨×•×•×™×¡: â‚ª1,500 (70% â‰¥ 65%)</li>
                <li>×”×“×’××” + ×”×¤×¨×©×™×: â‚ª230</li>
                <li><strong>×¡×”"×› ×¨×›×™×‘ ×¨×›×‘×™×: â‚ª5,090</strong></li>
            </ul>
        </div>

        <div id="layout-container"></div>
    </div>

    <script src="js/showroom-config.js"></script>
    <script src="js/generic-layout-generator.js"></script>
    <script src="js/calc-generic.js"></script>
    <script>
        console.log('âœ“ All modules loaded');

        const showroomId = 'mitsubishi-modiin';
        const month = '2026-01';
        
        // Create layout
        const container = document.getElementById('layout-container');
        container.innerHTML = createGenericMonthLayout(showroomId, month);
        console.log('âœ“ Layout created');

        // Fill test data
        const prefix = 'mm-2026-01';
        setTimeout(() => {
            document.getElementById(`${prefix}-branch-target`).value = 10;
            document.getElementById(`${prefix}-shahaf-cars`).value = 12;
            document.getElementById(`${prefix}-shahaf-insurance`).value = 8;
            document.getElementById(`${prefix}-shahaf-warranty`).value = 6;
            document.getElementById(`${prefix}-shahaf-topservice`).value = 7;
            document.getElementById(`${prefix}-shahaf-topservice-potential`).value = 10;
            document.getElementById(`${prefix}-shahaf-demo`).value = 150;
            document.getElementById(`${prefix}-shahaf-diff`).value = 80;
            
            console.log('âœ“ Test data filled');
            
            // Run calculation
            calculateGenericMonth(showroomId, month);
            console.log('âœ“ Calculation completed');
            
            // Verify results
            setTimeout(() => {
                const baseComm = document.getElementById(`${prefix}-shahaf-base-commission`)?.textContent;
                const insComm = document.getElementById(`${prefix}-shahaf-insurance-commission`)?.textContent;
                const warComm = document.getElementById(`${prefix}-shahaf-warranty-commission`)?.textContent;
                const topComm = document.getElementById(`${prefix}-shahaf-topservice-commission`)?.textContent;
                const vehiclesTotal = document.getElementById(`${prefix}-shahaf-vehicles-display`)?.textContent;
                const total = document.getElementById(`${prefix}-shahaf-total-display`)?.textContent;
                
                console.log('ğŸ“Š Results:');
                console.log('  Base (12Ã—200):', baseComm);
                console.log('  Insurance (8Ã—75):', insComm);
                console.log('  Warranty (6Ã—60):', warComm);
                console.log('  Top Service (70%):', topComm);
                console.log('  Vehicles Total:', vehiclesTotal);
                console.log('  Total:', total);
                
                // Add results to page
                const resultsDiv = document.createElement('div');
                resultsDiv.className = 'test-info';
                resultsDiv.style.background = '#e8f5e9';
                resultsDiv.style.borderLeftColor = '#4caf50';
                resultsDiv.innerHTML = `
                    <h3>âœ… ×ª×•×¦××•×ª ×‘×¤×•×¢×œ:</h3>
                    <ul>
                        <li>××¡×™×¨×•×ª ×¨×›×‘: ${baseComm}</li>
                        <li>×‘×™×˜×•×—: ${insComm}</li>
                        <li>×”×¨×—×‘×•×ª ××—×¨×™×•×ª: ${warComm}</li>
                        <li>×˜×•×¤ ×¡×¨×•×•×™×¡: ${topComm}</li>
                        <li><strong>×¡×”"×› ×¨×›×™×‘ ×¨×›×‘×™×: ${vehiclesTotal}</strong></li>
                        <li><strong>×¡×”"×› ×›×œ×œ×™: ${total}</strong></li>
                    </ul>
                `;
                document.querySelector('.test-container').appendChild(resultsDiv);
            }, 500);
        }, 500);
    </script>
</body>
</html>
