# 📘 מדריך: איך לעדכן כללי עמלות

## 🎯 מטרה
מדריך זה מסביר כיצד לשנות מדרגות עמלות, סכומים ותנאים במערכת **בלי** לפנות למתכנת.

---

## 🚀 דרך 1: ממשק ויזואלי (מומלץ למתחילים)

### שלב 1: פתח את ממשק הניהול
1. פתח דפדפן
2. גש ל: **`commission-manager.html`**
3. תראה ממשק יפה עם כל האולמות

### שלב 2: ערוך את הכללים
1. גלול למטה ומצא את האולם הרלוונטי (למשל: **ג'ילי מודיעין**)
2. שנה את המספרים בשדות:
   - **מסירות רכב**: שנה מ-200 ל-400 (לדוגמה)
   - **אחריות**: שנה מ-40 ל-50
   - **טופ סרוויס**: שנה את המדרגות
3. לחץ על **"💾 שמור שינויים"**

### שלב 3: העתק את הקוד
1. לחץ F12 (פתח Console)
2. העתק את הקוד שהודפס
3. או לחץ על **"📥 הורד כקובץ"** וזה יוריד קובץ

### שלב 4: שמור את הקובץ
1. פתח את `js/commission-rules.js` בעורך טקסט
2. הדבק את הקוד החדש
3. שמור את הקובץ

### שלב 5: בדוק במערכת
1. חזור למערכת הראשית (`index.html`)
2. לחץ Ctrl+Shift+R (רענון מלא)
3. בצע חישוב עמלות ובדוק שהשינויים נכנסו לתוקף

---

## 💻 דרך 2: עריכה ישירה (למתקדמים)

### שלב 1: פתח את הקובץ
פתח את הקובץ **`js/commission-rules.js`** בעורך טקסט (Notepad++, VSCode, וכו')

### שלב 2: מצא את האולם הרלוונטי
חפש את שם האולם, לדוגמה:
```javascript
'geely-modiin': {
    manager: {
        deliveryRate: 200,  // ← כאן!
    }
}
```

### שלב 3: שנה את הערכים
שנה את המספרים בצורה זהירה:

**לפני:**
```javascript
deliveryRate: 200,  // ש"ח לרכב
```

**אחרי:**
```javascript
deliveryRate: 400,  // ש"ח לרכב
```

### שלב 4: שמור את הקובץ
- לחץ Ctrl+S
- וודא שהקובץ נשמר ב-`js/commission-rules.js`

### שלב 5: בדוק במערכת
1. חזור למערכת הראשית
2. רענן (Ctrl+Shift+R)
3. בצע חישוב ובדוק

---

## 📋 דוגמאות נפוצות

### דוגמה 1: שינוי עמלת מסירות למנהל

**רוצה לשנות מ-200 ל-400 ש"ח לרכב:**

```javascript
// לפני
manager: {
    deliveryRate: 200,
}

// אחרי
manager: {
    deliveryRate: 400,
}
```

### דוגמה 2: שינוי מדרגות אביזרים

**רוצה לשנות את האחוז הראשון מ-2% ל-3%:**

```javascript
// לפני
accessoriesTiers: [
    { min: 0, max: 1500, rate: 0.02, description: 'עד 1500: 2%' },
    ...
]

// אחרי
accessoriesTiers: [
    { min: 0, max: 1500, rate: 0.03, description: 'עד 1500: 3%' },
    ...
]
```

### דוגמה 3: שינוי עמלת טופ סרוויס

**רוצה לשנות את הבונוס ל-80%+ מ-1250 ל-1500:**

```javascript
// לפני
topService: {
    tiers: [
        ...
        { min: 80, max: 100, amount: 1250, description: '80%+: 1250 ש"ח' }
    ]
}

// אחרי
topService: {
    tiers: [
        ...
        { min: 80, max: 100, amount: 1500, description: '80%+: 1500 ש"ח' }
    ]
}
```

---

## ⚠️ דברים חשובים לזכור

### ✅ מה בטוח לשנות?
- **מספרים** (200, 400, 0.05, וכו')
- **תיאורים** (description)
- **ערכי min/max במדרגות**

### ❌ מה **לא** לשנות?
- **שמות שדות** (`deliveryRate`, `accessoriesTiers`, וכו')
- **מבנה הקוד** (סוגריים, פסיקים)
- **שמות אולמות** (`geely-modiin`, `hyundai-jerusalem`)

### 💡 טיפים
1. **תמיד עשה גיבוי** לפני שינוי
2. **שנה רק מספר אחד בכל פעם** ובדוק
3. **בדוק תמיד** אחרי שינוי שהמערכת עובדת
4. **שמור את הקובץ הישן** כ-`commission-rules-backup.js`

---

## 🐛 פתרון בעיות

### בעיה: "המערכת לא טוענת"
**פתרון:**
1. פתח Console (F12)
2. חפש שגיאות אדומות
3. בדוק אם יש פסיק או סוגריים חסרים
4. שחזר מגיבוי

### בעיה: "השינויים לא נכנסו לתוקף"
**פתרון:**
1. וודא ששמרת את הקובץ
2. רענן את הדפדפן עם Ctrl+Shift+R (לא רק F5!)
3. נקה cache: Ctrl+Shift+Delete

### בעיה: "חישוב לא עובד נכון"
**פתרון:**
1. בדוק אם השדה הנכון השתנה
2. וודא שהמספר הגיוני (לא שלילי, לא גדול מדי)
3. בדוק את Console לשגיאות

---

## 📞 צריך עזרה?

אם משהו לא עובד:
1. צלם את השגיאה (screenshot)
2. צלם את הקוד ששינית
3. פנה למתכנת עם הפרטים

---

## ✅ checklist לפני שינוי

- [ ] יצרתי גיבוי של הקובץ
- [ ] אני יודע איזה מספר אני רוצה לשנות
- [ ] בדקתי את שם השדה הנכון
- [ ] שמרתי את הקובץ אחרי השינוי
- [ ] רעננתי את הדפדפן (Ctrl+Shift+R)
- [ ] בדקתי שהחישוב עובד נכון

---

**בהצלחה! 🎉**
